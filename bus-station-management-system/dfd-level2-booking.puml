@startuml Level 2 DFD - Booking Management (Process 2.0)

skinparam maxwidth 1600
skinparam maxheight 1100
skinparam dpi 300
scale max 1600x1100

title Level 2 Data Flow Diagram - Booking Management (Process 2.0)

rectangle "Passenger" as Passenger
rectangle "Staff" as Staff

rectangle "D1\nPassenger" as D1
rectangle "D3\nBooking" as D3
rectangle "D5\nTrip" as D5
rectangle "D7\nRoute" as D7

rectangle "3.0\nPayment" as P3

rectangle "2.1\nBooking Creation" as P21
rectangle "2.2\nModification" as P22
rectangle "2.3\nCancellation" as P23
rectangle "2.4\nTicket" as P24

Passenger --> P21 : Selection, info
Staff --> P21 : Selection, info
P21 --> Passenger : Availability
P21 --> Staff : Availability
P21 --> D3 : write
P21 --> D5 : read
P21 --> D7 : read
P21 --> P24 : Booking details
P21 --> P3 : Payment request

Passenger --> P22 : Reference, change
Staff --> P22 : Reference, change
P22 --> Passenger : Updated booking
P22 --> Staff : Updated booking
P22 --> D3 : read/write
P22 --> D5 : read
P22 --> P3 : Fare difference

Passenger --> P23 : Reference, cancel
Staff --> P23 : Reference, cancel
P23 --> Passenger : Confirmation
P23 --> Staff : Confirmation
P23 --> D3 : read/write
P23 --> D5 : read/write
P23 --> P3 : Refund request

P24 --> Passenger : Ticket
P24 --> Staff : Ticket
P24 --> D3 : read/write
P3 --> P24 : Payment confirmation

@enduml
